{"version":3,"sources":["App.tsx","index.tsx"],"names":["globalStyles","css","ResultAreaStyled","styled","div","CameraAreaStyled","App","React","memo","useState","deviceId","setDeviceId","result","setResult","isCameraActive","setIsCameraActive","videoRef","useRef","codeReader","useMemo","BrowserMultiFormatReader","useEffect","navigator","mediaDevices","enumerateDevices","then","data","map","item","kind","catch","err","console","log","start","useCallback","decodeFromVideoDevice","current","error","NotFoundException","reset","Fragment","styles","onClick","ref","autoPlay","width","height","getText","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"orBAMA,IAAMA,EAAeC,YAAH,KAQZC,EAAmBC,IAAOC,IAAV,KAIhBC,EAAmBF,IAAOC,IAAV,KAUTE,EAAMC,IAAMC,MAAK,WAAO,IAAD,EACHD,IAAME,SAAiB,IADpB,mBAC5BC,EAD4B,KAClBC,EADkB,OAEPJ,IAAME,WAFC,mBAE5BG,EAF4B,KAEpBC,EAFoB,OAGSN,IAAME,UAAkB,GAHjC,mBAG5BK,EAH4B,KAGZC,EAHY,KAI7BC,EAAWT,IAAMU,OAAyB,MAC1CC,EAAaX,IAAMY,SAAQ,kBAAM,IAAIC,6BAA4B,IAEvEb,IAAMc,WAAU,WACfC,UAAUC,aACRC,mBACAC,MAAK,SAAAC,GAAI,OAAIA,EAAKC,KAAI,SAAAC,GAAI,MAAmB,eAAdA,EAAKC,KAAyBlB,EAAYiB,EAAKlB,UAAYC,EAAY,UACtGmB,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,QACzB,IAEH,IAAMG,EAAQ3B,IAAM4B,aAAY,WAE/BH,QAAQC,IAAI,mBACZD,QAAQC,IAAI,WAAYvB,GACxBQ,EACEkB,sBAAsB1B,EAAUM,EAASqB,SAAS,SAACzB,EAAQ0B,GAC3DvB,GAAkB,GACdH,IACHoB,QAAQC,IAAI,SAAUrB,GACtBC,EAAUD,KAEP0B,GAAWA,aAAiBC,qBAC/BP,QAAQM,MAAM,UAAWA,MAG1BR,OAAM,SAAAQ,GACNN,QAAQC,IAAI,UAAWK,QAEvB,CAACpB,EAAYR,IACV8B,EAAQjC,IAAM4B,aAAY,WAC/BjB,EAAWsB,QACXzB,GAAkB,KAChB,CAACG,IACJ,OACC,kBAAC,IAAMuB,SAAP,KACC,kBAAC,IAAD,CAAQC,OAAQ1C,IAEhB,kBAACE,EAAD,KACGY,EAKD,GAJA,kBAACT,EAAD,KACC,4BAAQsC,QAAST,GAAjB,oBAKF,2BAAOU,IAAK5B,EAAU6B,UAAQ,EAACC,MAAO,MAAOC,OAAQ,SAEtD,sCAAYnC,GAAUA,EAAOoC,WAE7B,4BAAQL,QAASH,GAAjB,uBC7EHS,IAASC,OACR,kBAAC,IAAMC,WAAP,KACC,kBAAC7C,EAAD,OAED8C,SAASC,eAAe,W","file":"static/js/main.803c73e8.chunk.js","sourcesContent":["import React from 'react';\nimport styled from '@emotion/styled';\nimport {css, Global} from '@emotion/core';\nimport {BrowserMultiFormatReader, NotFoundException, Result} from '@zxing/library';\n\n//#region styled\nconst globalStyles = css`\n\thtml,\n\tbody,\n\t#root {\n\t\tpadding: 20px;\n\t\tmargin: 0;\n\t}\n`;\nconst ResultAreaStyled = styled.div`\n\twidth: 529px;\n\theight: 400px;\n`;\nconst CameraAreaStyled = styled.div`\n\twidth: inherit;\n\theight: inherit;\n\tbackground-color: #f2f2f2;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n`;\n//#endregion\n\nexport const App = React.memo(() => {\n\tconst [deviceId, setDeviceId] = React.useState<string>('');\n\tconst [result, setResult] = React.useState<Result>();\n\tconst [isCameraActive, setIsCameraActive] = React.useState<boolean>(false);\n\tconst videoRef = React.useRef<HTMLVideoElement>(null);\n\tconst codeReader = React.useMemo(() => new BrowserMultiFormatReader(), []);\n\n\tReact.useEffect(() => {\n\t\tnavigator.mediaDevices\n\t\t\t.enumerateDevices()\n\t\t\t.then(data => data.map(item => (item.kind === 'videoinput') ? setDeviceId(item.deviceId) : setDeviceId('')))\n\t\t\t.catch(err => console.log(err));\n\t}, []);\n\n\tconst start = React.useCallback(() => {\n\t\t//decoding starts\n\t\tconsole.log('decoding starts');\n\t\tconsole.log('deviceId', deviceId);\n\t\tcodeReader\n\t\t\t.decodeFromVideoDevice(deviceId, videoRef.current, (result, error) => {\n\t\t\t\tsetIsCameraActive(true);\n\t\t\t\tif (result) {\n\t\t\t\t\tconsole.log('result', result);\n\t\t\t\t\tsetResult(result);\n\t\t\t\t}\n\t\t\t\tif (error && !(error instanceof NotFoundException)) {\n\t\t\t\t\tconsole.error('error 1', error);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log('error 2', error);\n\t\t\t});\n\t}, [codeReader, deviceId]);\n\tconst reset = React.useCallback(() => {\n\t\tcodeReader.reset();\n\t\tsetIsCameraActive(false);\n\t}, [codeReader]);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Global styles={globalStyles} />\n\n\t\t\t<ResultAreaStyled>\n\t\t\t\t{!isCameraActive ? (\n\t\t\t\t\t<CameraAreaStyled>\n\t\t\t\t\t\t<button onClick={start}>Activate Camera</button>\n\t\t\t\t\t</CameraAreaStyled>\n\t\t\t\t) : (\n\t\t\t\t\t''\n\t\t\t\t)}\n\t\t\t\t<video ref={videoRef} autoPlay width={'529'} height={'400'} />\n\t\t\t</ResultAreaStyled>\n\t\t\t<p>result: {result && result.getText()}</p>\n\n\t\t\t<button onClick={reset}>Turn off Camera</button>\n\t\t</React.Fragment>\n\t);\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {App} from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n);\n"],"sourceRoot":""}